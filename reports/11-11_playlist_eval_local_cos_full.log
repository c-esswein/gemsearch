nohup: ignoring input
2017-11-11 11:41:09,848 - summa.preprocessing.cleaner - INFO - 'pattern' package not found; tag filters are not available for English
2017-11-11 11:41:09,879 - __main__ - INFO - started playlist eval with config: {'dataDir': 'data/full_model/', 'outDir': 'data/rec_all/', 'SHOULD_GENERATE_GRAPH': False, 'SHOULD_INDEX_ES': False, 'TEST_PLAYLIST_SPLIT': 0.2, 'PRECISION_AT': [1, 10, 15], 'USE_USER_IN_QUERY': True, 'SHOULD_EMBED': False, 'ARGS': Namespace(album=True, genre=True, tags=True)}
2017-11-11 11:41:09,880 - __main__ - INFO - %%% playlist_eval runner... 
2017-11-11 11:41:10,113 - __main__ - INFO - %%% ge calc initializing... 
2017-11-11 11:42:00,112 - __main__ - INFO - %%% ge calc initializing done in 49.999s


2017-11-11 11:42:00,112 - __main__ - INFO - ------------- evaluation -------------
2017-11-11 11:42:00,113 - __main__ - INFO - %%% evaluation... 
2017-11-11 11:42:00,113 - gemsearch.evaluation.playlist_query_evaluator - INFO - Started playlist evaluation with 4159 playlists
2017-11-11 19:16:37,167 - gemsearch.evaluation.playlist_query_evaluator - INFO - Playlist evaluation finished: total 4159 playlists (testsplit=0.2)
[{'key': 'rec_random_tracks@1',
  'values': {'avg_hits': 0.0,
             'avg_hits_on_has_hits': 0,
             'has_hits': 0,
             'precision': 0.0,
             'precision_on_has_hits': 0,
             'recall': 0.0}},
 {'key': 'rec_random_tracks@10',
  'values': {'avg_hits': 0.00024044241404183698,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 1,
             'precision': 2.40442414041837e-05,
             'precision_on_has_hits': 0.1,
             'recall': 6.360910424387221e-07}},
 {'key': 'rec_random_tracks@15',
  'values': {'avg_hits': 0.0009617696561673479,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 4,
             'precision': 6.411797707782319e-05,
             'precision_on_has_hits': 0.06666666666666667,
             'recall': 2.13126305994817e-05}},
 {'key': 'rec_tracks_with_user@1',
  'values': {'avg_hits': 0.006732387593171436,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 28,
             'precision': 0.006732387593171436,
             'precision_on_has_hits': 1.0,
             'recall': 0.00011632739209040788}},
 {'key': 'rec_tracks_with_user@15',
  'values': {'avg_hits': 0.12094253426304401,
             'avg_hits_on_has_hits': 2.053061224489796,
             'has_hits': 245,
             'precision': 0.008062835617536254,
             'precision_on_has_hits': 0.13687074829931953,
             'recall': 0.002368343111716159}},
 {'key': 'rec_tracks_with_user@10',
  'values': {'avg_hits': 0.08199086318826641,
             'avg_hits_on_has_hits': 1.8042328042328042,
             'has_hits': 189,
             'precision': 0.008199086318826656,
             'precision_on_has_hits': 0.18042328042328074,
             'recall': 0.0017257181287478503}},
 {'key': 'rec_query_tracks_with_user_mean@15',
  'values': {'avg_hits': 0.30271699927867274,
             'avg_hits_on_has_hits': 2.407265774378585,
             'has_hits': 523,
             'precision': 0.020181133285244943,
             'precision_on_has_hits': 0.1604843849585731,
             'recall': 0.00965072291400049}},
 {'key': 'rec_query_tracks_with_user@15',
  'values': {'avg_hits': 0.30271699927867274,
             'avg_hits_on_has_hits': 2.407265774378585,
             'has_hits': 523,
             'precision': 0.020181133285244943,
             'precision_on_has_hits': 0.1604843849585731,
             'recall': 0.00965072291400049}},
 {'key': 'rec_query_tracks_with_user_mean@10',
  'values': {'avg_hits': 0.2041356095215196,
             'avg_hits_on_has_hits': 2.050724637681159,
             'has_hits': 414,
             'precision': 0.02041356095215194,
             'precision_on_has_hits': 0.20507246376811575,
             'recall': 0.00683120407014253}},
 {'key': 'rec_query_tracks_with_user@10',
  'values': {'avg_hits': 0.2041356095215196,
             'avg_hits_on_has_hits': 2.050724637681159,
             'has_hits': 414,
             'precision': 0.02041356095215194,
             'precision_on_has_hits': 0.20507246376811575,
             'recall': 0.00683120407014253}},
 {'key': 'rec_query_tracks_with_user_mean@1',
  'values': {'avg_hits': 0.021639817263765328,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 90,
             'precision': 0.021639817263765328,
             'precision_on_has_hits': 1.0,
             'recall': 0.0008517694471223994}},
 {'key': 'rec_query_tracks_with_user@1',
  'values': {'avg_hits': 0.021639817263765328,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 90,
             'precision': 0.021639817263765328,
             'precision_on_has_hits': 1.0,
             'recall': 0.0008517694471223994}},
 {'key': 'rec_multiple_queries_tracks_with_user@15',
  'values': {'avg_hits': 0.5455638374609281,
             'avg_hits_on_has_hits': 3.1082191780821917,
             'has_hits': 730,
             'precision': 0.03637092249739512,
             'precision_on_has_hits': 0.20721461187214563,
             'recall': 0.02566361810527089}},
 {'key': 'rec_multiple_queries_tracks_with_user@10',
  'values': {'avg_hits': 0.38494830488098103,
             'avg_hits_on_has_hits': 2.616013071895425,
             'has_hits': 612,
             'precision': 0.03849483048809787,
             'precision_on_has_hits': 0.2616013071895409,
             'recall': 0.018976121114818428}},
 {'key': 'rec_multiple_queries_tracks_with_user@1',
  'values': {'avg_hits': 0.04087521038711229,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 170,
             'precision': 0.04087521038711229,
             'precision_on_has_hits': 1.0,
             'recall': 0.0021421272769740884}},
 {'key': 'rec_first_two_query_tracks_with_user@15',
  'values': {'avg_hits': 0.6734792017311854,
             'avg_hits_on_has_hits': 3.201142857142857,
             'has_hits': 875,
             'precision': 0.04489861344874548,
             'precision_on_has_hits': 0.21340952380952283,
             'recall': 0.029349637610437185}},
 {'key': 'rec_first_two_query_tracks_with_user@10',
  'values': {'avg_hits': 0.4731906708343352,
             'avg_hits_on_has_hits': 2.7257617728531858,
             'has_hits': 722,
             'precision': 0.04731906708343323,
             'precision_on_has_hits': 0.2725761772853169,
             'recall': 0.02105619921603674}},
 {'key': 'rec_first_two_query_tracks_with_user@1',
  'values': {'avg_hits': 0.05433998557345516,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 226,
             'precision': 0.05433998557345516,
             'precision_on_has_hits': 1.0,
             'recall': 0.00265570365992061}},
 {'key': 'rec_query_tracks_with_user_scaled@15',
  'values': {'avg_hits': 0.9860543399855735,
             'avg_hits_on_has_hits': 4.048371174728529,
             'has_hits': 1013,
             'precision': 0.06573695599903791,
             'precision_on_has_hits': 0.2698914116485673,
             'recall': 0.04904354771735473}},
 {'key': 'rec_query_tracks_with_user_scaled@10',
  'values': {'avg_hits': 0.6984852127915364,
             'avg_hits_on_has_hits': 3.339080459770115,
             'has_hits': 870,
             'precision': 0.06984852127915346,
             'precision_on_has_hits': 0.3339080459770106,
             'recall': 0.03615352343251117}},
 {'key': 'rec_query_tracks_with_user_scaled@1',
  'values': {'avg_hits': 0.08006732387593171,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 333,
             'precision': 0.08006732387593171,
             'precision_on_has_hits': 1.0,
             'recall': 0.004372840162936691}},
 {'key': 'rec_first_two_query_tracks_with_user_scaled@15',
  'values': {'avg_hits': 1.5167107477759076,
             'avg_hits_on_has_hits': 4.648489314664702,
             'has_hits': 1357,
             'precision': 0.10111404985172633,
             'precision_on_has_hits': 0.3098992876443108,
             'recall': 0.08481928371097892}},
 {'key': 'rec_first_two_query_tracks_with_user_scaled@10',
  'values': {'avg_hits': 1.097138735272902,
             'avg_hits_on_has_hits': 3.777317880794702,
             'has_hits': 1208,
             'precision': 0.10971387352729044,
             'precision_on_has_hits': 0.37773178807947094,
             'recall': 0.06335229039018406}},
 {'key': 'rec_multiple_queries_tracks@15',
  'values': {'avg_hits': 1.926424621303198,
             'avg_hits_on_has_hits': 6.328593996840443,
             'has_hits': 1266,
             'precision': 0.12842830808687966,
             'precision_on_has_hits': 0.42190626645602886,
             'recall': 0.11894199130388868}},
 {'key': 'rec_first_two_query_tracks_with_user_scaled@1',
  'values': {'avg_hits': 0.13080067323875932,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 544,
             'precision': 0.13080067323875932,
             'precision_on_has_hits': 1.0,
             'recall': 0.008077901830034722}},
 {'key': 'rec_query_tracks@15',
  'values': {'avg_hits': 2.060591488338543,
             'avg_hits_on_has_hits': 6.664074650077761,
             'has_hits': 1286,
             'precision': 0.13737276588923633,
             'precision_on_has_hits': 0.4442716433385178,
             'recall': 0.1282249911628029}},
 {'key': 'rec_first_two_query_tracks@15',
  'values': {'avg_hits': 2.1555662418850687,
             'avg_hits_on_has_hits': 6.264849755415793,
             'has_hits': 1431,
             'precision': 0.14370441612567136,
             'precision_on_has_hits': 0.41765665036105326,
             'recall': 0.1335418999664972}},
 {'key': 'rec_first_two_query_tracks_mean@15',
  'values': {'avg_hits': 2.1555662418850687,
             'avg_hits_on_has_hits': 6.264849755415793,
             'has_hits': 1431,
             'precision': 0.14370441612567136,
             'precision_on_has_hits': 0.41765665036105326,
             'recall': 0.1335418999664972}},
 {'key': 'rec_multiple_queries_tracks@10',
  'values': {'avg_hits': 1.4628516470305362,
             'avg_hits_on_has_hits': 5.112605042016806,
             'has_hits': 1190,
             'precision': 0.146285164703054,
             'precision_on_has_hits': 0.511260504201682,
             'recall': 0.09507622104809407}},
 {'key': 'rec_query_tracks@10',
  'values': {'avg_hits': 1.5700889636931954,
             'avg_hits_on_has_hits': 5.352459016393443,
             'has_hits': 1220,
             'precision': 0.15700889636932008,
             'precision_on_has_hits': 0.5352459016393462,
             'recall': 0.10324989934861063}},
 {'key': 'rec_first_two_query_tracks@10',
  'values': {'avg_hits': 1.6292377975474874,
             'avg_hits_on_has_hits': 5.019259259259259,
             'has_hits': 1350,
             'precision': 0.16292377975474925,
             'precision_on_has_hits': 0.5019259259259276,
             'recall': 0.1064988512069496}},
 {'key': 'rec_first_two_query_tracks_mean@10',
  'values': {'avg_hits': 1.6292377975474874,
             'avg_hits_on_has_hits': 5.019259259259259,
             'has_hits': 1350,
             'precision': 0.16292377975474925,
             'precision_on_has_hits': 0.5019259259259276,
             'recall': 0.1064988512069496}},
 {'key': 'rec_album_or_query@15',
  'values': {'avg_hits': 2.575619139216158,
             'avg_hits_on_has_hits': 8.50833995234313,
             'has_hits': 1259,
             'precision': 0.17170794261441089,
             'precision_on_has_hits': 0.5672226634895432,
             'recall': 0.16342141953587058}},
 {'key': 'rec_multiple_queries_tracks@1',
  'values': {'avg_hits': 0.1800913681173359,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 749,
             'precision': 0.1800913681173359,
             'precision_on_has_hits': 1.0,
             'recall': 0.012401703083984387}},
 {'key': 'rec_query_tracks@1',
  'values': {'avg_hits': 0.19403702813176243,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 807,
             'precision': 0.19403702813176243,
             'precision_on_has_hits': 1.0,
             'recall': 0.013413634564052514}},
 {'key': 'rec_album_or_query@10',
  'values': {'avg_hits': 1.9545563837460929,
             'avg_hits_on_has_hits': 6.707095709570957,
             'has_hits': 1212,
             'precision': 0.19545563837460966,
             'precision_on_has_hits': 0.670709570957097,
             'recall': 0.13177268960280983}},
 {'key': 'rec_first_two_query_tracks@1',
  'values': {'avg_hits': 0.2017311853811012,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 839,
             'precision': 0.2017311853811012,
             'precision_on_has_hits': 1.0,
             'recall': 0.013902935058505204}},
 {'key': 'rec_first_two_query_tracks_mean@1',
  'values': {'avg_hits': 0.2017311853811012,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 839,
             'precision': 0.2017311853811012,
             'precision_on_has_hits': 1.0,
             'recall': 0.013902935058505204}},
 {'key': 'rec_album_or_query@1',
  'values': {'avg_hits': 0.2190430391921135,
             'avg_hits_on_has_hits': 1.0,
             'has_hits': 911,
             'precision': 0.2190430391921135,
             'precision_on_has_hits': 1.0,
             'recall': 0.015310109653414413}}]
2017-11-11 19:16:37,183 - __main__ - INFO - %%% evaluation done in 27277.07s


------------- done -------------
2017-11-11 19:16:37,508 - __main__ - INFO - %%% playlist_eval runner done in 27327.628s

-------------  -------------
extracted query types:
-------------  -------------


2017-11-12 00:38:12,006 - __main__ - INFO - started query extraction stats with config: {'outDir': 'data/queries/'}
2017-11-12 00:38:12,010 - __main__ - INFO - %%% query extraction stats runner... 
2017-11-12 00:38:12,011 - __main__ - INFO - Load playlists
2017-11-12 00:38:12,433 - __main__ - INFO - Total playlist count 4159
simple_first_match
Counter({'tag': 1526, 'track': 1067, 'album': 968, 'artist': 576, 'genre': 22})
simple_first_two_match
Counter({'tag': 2983,
         'track': 2257,
         'album': 1842,
         'artist': 1188,
         'genre': 36})
multiple_queries
Counter({'track': 2709,
         'tag': 2588,
         'album': 1559,
         'artist': 1103,
         'genre': 28})
2017-11-12 00:38:12,688 - __main__ - INFO - %%% query extraction stats runner done in 0.677s


2017-11-12 00:38:12,690 - __main__ - INFO - ------------- done -------------




